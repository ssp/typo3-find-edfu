{namespace s=Tx_Find_ViewHelpers}
<f:if condition="{document.fields.szene_uid}">
	<s:transpose name="szenen" arrays="{
		uid: document.fields.szene_uid,
		nummer: document.fields.szene_nummer,
		beschreibung: document.fields.szene_beschreibung,
		bild_name: document.fields.szene_bild_name,
		bild_dateiname: document.fields.szene_bild_dateiname,
		bild_hoehe: document.fields.szene_bild_hoehe,
		bild_breite: document.fields.szene_bild_breite,
		bild_offset_x: document.fields.szene_bild_offset_x,
		bild_offset_y: document.fields.szene_bild_offset_y,
		bild_rect: document.fields.szene_bild_rect,
		koordinate_x: document.fields.szene_koordinate_x,
		koordinate_y: document.fields.szene_koordinate_y,
		breite: document.fields.szene_breite,
		hoehe: document.fields.szene_hoehe,
		prozent_z: document.fields.szene_prozent_z,
		blickwinkel: document.fields.szene_blickwinkel
	}">
		<section class="map">
			<h1>
				<f:translate key="LLL:{settings.languageRootPath}locallang-edfu.xml:Tempelplan"/>
			</h1>
			<div class="mapContainer">
				<f:image src="EXT:find/Projects/edfu/Resources/tempel/tempel.png" alt="{f:translate(key:'LLL:{settings.languageRootPath}locallang-edfu.xml:Tempelplan')}"/>
				<f:for each="{szenen}" as="szene">
					<f:link.action
						arguments="{
							q:'{raw:\"szene_uid:{szene.uid}\"}',
							facets:'{s:newArray(keys:\"{0:document.fields.typ}\", values:\"{0:1}\")}'
						}"
						section="{jumpToID}"
						noCacheHash="1"
						class="szene icon-pointer-{szene.blickwinkel}"
						style="top:{szene.koordinate_y}px;
						       left:{szene.koordinate_x}px;
							   color:hsl(-{szene.prozent_z}, 100%, 50%);"
						additionalAttributes="{
							data-marker:'{s:json(data:szene)}',
							data-bild_dateiname:szene.bild_dateiname}"
						title="{f:translate(key:'LLL:{settings.languageRootPath}locallang-edfu.xml:Szene')}: {szene.beschreibung}."/>
				</f:for>
			</div>
			<div class="detailsContainer"></div>
			<div class="legendeHoehe">
				<f:translate key="LLL:{settings.languageRootPath}locallang-edfu.xml:HÃ¶he"/>:
				<div class="verlaufHoehe">
					<span class="label unten"><f:translate key="LLL:{settings.languageRootPath}locallang-edfu.xml:unten"/></span>
					<span class="label oben"><f:translate key="LLL:{settings.languageRootPath}locallang-edfu.xml:oben"/></span>
				</div>
			</div>
		</section>
	</s:transpose>
</f:if>
