{namespace s=Subugoe\Find\ViewHelpers}
<f:comment>
	Renders the given field as a remark.
	
	First uses highlighting and then uses regular expressions to insert markup
	for displaying text inside single quotes as transliteration.
</f:comment>
<s:format.regexp match="/'([^']*)'/u" replace="<span class='transliteration'>\\1</span>">
	<s:format.regexp match="/<((?!\/?em)[^>]*)>/u" replace="&lt;\\1&gt;">
		<s:format.regexp match="/&/" replace="&amp;">
			<s:find.highlightField
				field="{field}"
				document="{document}"
				results="{results}"
				raw="1"
			/>
		</s:format.regexp>
	</s:format.regexp>
</s:format.regexp>